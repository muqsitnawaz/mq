{
  "doc_name": "AGENTS",
  "structure": [
    {
      "title": "Global development guidelines for the LangChain monorepo",
      "node_id": "0000",
      "prefix_summary": "# Global development guidelines for the LangChain monorepo\n\nThis document provides context to understand the LangChain Python project and assist with development.",
      "line_num": 1,
      "nodes": [
        {
          "title": "Project architecture and context",
          "node_id": "0001",
          "prefix_summary": "## Project architecture and context",
          "line_num": 5,
          "nodes": [
            {
              "title": "Monorepo structure",
              "node_id": "0002",
              "summary": "The partial document describes the structure and organization of a Python monorepo for LangChain, which contains multiple independently versioned packages. It outlines the directory structure, including key components such as:\n\n1. **Core Layer (`langchain-core`)**: Contains base abstractions, interfaces, and protocols, which are foundational but not directly exposed to users.\n2. **Implementation Layer (`langchain` and `langchain_v1`)**: Includes concrete implementations and high-level public utilities, with `langchain_v1` being actively maintained and `langchain-classic` being legacy.\n3. **Integration Layer (`partners/`)**: Provides third-party service integrations, such as OpenAI, Anthropic, and local model support, while noting that some integrations are maintained in separate repositories.\n4. **Testing Layer (`standard-tests/`)**: Contains standardized integration tests for partner services.\n5. Additional utilities and tools, such as document chunking (`text-splitters`), model configuration profiles (`model-profiles`), command-line tools (`cli`), and CI/CD workflows (`.github/`).\n\nThe document also highlights the purpose of each layer and provides guidance on navigating related repositories for external integrations.",
              "line_num": 7
            },
            {
              "title": "Development tools & commands**",
              "node_id": "0003",
              "prefix_summary": "### Development tools & commands**\n\n- `uv` – Fast Python package installer and resolver (replaces pip/poetry)\n- `make` – Task runner for common development commands. Feel free to look at the `Makefile` for available commands and usage patterns.\n- `ruff` – Fast Python linter and formatter\n- `mypy` – Static type checking\n- `pytest` – Testing framework\n\nThis monorepo uses `uv` for dependency management. Local development uses editable installs: `[tool.uv.sources]`\n\nEach package in `libs/` has its own `pyproject.toml` and `uv.lock`.\n\n```bash\n# Run unit tests (no network)\nmake test\n\n# Run specific test file\nuv run --group test pytest tests/unit_tests/test_specific.py\n```\n\n```bash\n# Lint code\nmake lint\n\n# Format code\nmake format\n\n# Type checking\nuv run --group lint mypy .\n```",
              "line_num": 36,
              "nodes": [
                {
                  "title": "Key config files",
                  "node_id": "0004",
                  "summary": "#### Key config files\n\n- pyproject.toml: Main workspace configuration with dependency groups\n- uv.lock: Locked dependencies for reproducible builds\n- Makefile: Development tasks",
                  "line_num": 67
                },
                {
                  "title": "Commit standards",
                  "node_id": "0005",
                  "summary": "#### Commit standards\n\nSuggest PR titles that follow Conventional Commits format. Refer to .github/workflows/pr_lint for allowed types and scopes. Note that all commit/PR titles should be in lowercase with the exception of proper nouns/named entities. All PR titles should include a scope with no exceptions. For example:\n\n```txt\nfeat(langchain): add new chat completion feature\nfix(core): resolve type hinting issue in vector store\nchore(anthropic): update infrastructure dependencies\n```\n\nNote how `feat(langchain)` includes a scope even though it is the main package and name of the repo.",
                  "line_num": 73
                },
                {
                  "title": "Pull request guidelines",
                  "node_id": "0006",
                  "summary": "#### Pull request guidelines\n\n- Always add a disclaimer to the PR description mentioning how AI agents are involved with the contribution.\n- Describe the \"why\" of the changes, why the proposed solution is the right one. Limit prose.\n- Highlight areas of the proposed changes that require careful review.",
                  "line_num": 85
                }
              ]
            }
          ]
        },
        {
          "title": "Core development principles",
          "node_id": "0007",
          "prefix_summary": "## Core development principles",
          "line_num": 91,
          "nodes": [
            {
              "title": "Maintain stable public interfaces",
              "node_id": "0008",
              "summary": "### Maintain stable public interfaces\n\nCRITICAL: Always attempt to preserve function signatures, argument positions, and names for exported/public methods. Do not make breaking changes.\nYou should warn the developer for any function signature changes, regardless of whether they look breaking or not.\n\n**Before making ANY changes to public APIs:**\n\n- Check if the function/class is exported in `__init__.py`\n- Look for existing usage patterns in tests and examples\n- Use keyword-only arguments for new parameters: `*, new_param: str = \"default\"`\n- Mark experimental features clearly with docstring warnings (using MkDocs Material admonitions, like `!!! warning`)\n\nAsk: \"Would this change break someone's code if they used it last week?\"",
              "line_num": 93
            },
            {
              "title": "Code quality standards",
              "node_id": "0009",
              "summary": "### Code quality standards\n\nAll Python code MUST include type hints and return types.\n\n```python title=\"Example\"\ndef filter_unknown_users(users: list[str], known_users: set[str]) -> list[str]:\n    \"\"\"Single line description of the function.\n\n    Any additional context about the function can go here.\n\n    Args:\n        users: List of user identifiers to filter.\n        known_users: Set of known/valid user identifiers.\n\n    Returns:\n        List of users that are not in the known_users set.\n    \"\"\"\n```\n\n- Use descriptive, self-explanatory variable names.\n- Follow existing patterns in the codebase you're modifying\n- Attempt to break up complex functions (>20 lines) into smaller, focused functions where it makes sense",
              "line_num": 107
            },
            {
              "title": "Testing requirements",
              "node_id": "0010",
              "summary": "### Testing requirements\n\nEvery new feature or bugfix MUST be covered by unit tests.\n\n- Unit tests: `tests/unit_tests/` (no network calls allowed)\n- Integration tests: `tests/integration_tests/` (network calls permitted)\n- We use `pytest` as the testing framework; if in doubt, check other existing tests for examples.\n- The testing file structure should mirror the source code structure.\n\n**Checklist:**\n\n- [ ] Tests fail when your new logic is broken\n- [ ] Happy path is covered\n- [ ] Edge cases and error conditions are tested\n- [ ] Use fixtures/mocks for external dependencies\n- [ ] Tests are deterministic (no flaky tests)\n- [ ] Does the test suite fail if your new logic is broken?",
              "line_num": 130
            },
            {
              "title": "Security and risk assessment",
              "node_id": "0011",
              "summary": "### Security and risk assessment\n\n- No `eval()`, `exec()`, or `pickle` on user-controlled input\n- Proper exception handling (no bare `except:`) and use a `msg` variable for error messages\n- Remove unreachable/commented code before committing\n- Race conditions or resource leaks (file handles, sockets, threads).\n- Ensure proper resource cleanup (file handles, connections)",
              "line_num": 148
            },
            {
              "title": "Documentation standards",
              "node_id": "0012",
              "summary": "The partial document outlines standards for writing documentation, specifically using Google-style docstrings for public functions. Key points include:\n\n- Using type annotations in function signatures instead of docstrings.\n- Avoiding repetition of default values in docstrings unless necessary due to post-processing or conditional settings.\n- Emphasizing the \"why\" in descriptions rather than the \"what.\"\n- Documenting all parameters, return values, and exceptions.\n- Keeping descriptions concise and clear.\n- Adhering to American English spelling conventions.",
              "line_num": 156
            }
          ]
        },
        {
          "title": "Additional resources",
          "node_id": "0013",
          "summary": "## Additional resources\n\n- **Documentation:** https://docs.langchain.com/oss/python/langchain/overview and source at https://github.com/langchain-ai/docs or `../docs/`. Prefer the local install and use file search tools for best results. If needed, use the docs MCP server as defined in `.mcp.json` for programmatic access.\n- **Contributing Guide:** [`.github/CONTRIBUTING.md`](https://docs.langchain.com/oss/python/contributing/overview)",
          "line_num": 187
        }
      ]
    }
  ]
}